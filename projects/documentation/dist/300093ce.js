let e,t,o=e=>e;import{c as n,_ as s,p as i,L as r,h as a}from"./7cfe642d.js";const l=n(e||(e=o`:host([disabled]) #trigger{pointer-events:none}#overlay-content{display:none}`));let c=(()=>{class e extends r{constructor(){super(...arguments),this.placement="bottom",this.offset=6,this.disabled=!1,this.hoverOverlayReady=Promise.resolve()}static get styles(){return[l]}render(){return a(t||(t=o` <div id="trigger" @click="${0}" @mouseenter="${0}" @mouseleave="${0}"> <slot @slotchange="${0}" name="trigger"></slot> </div> <div id="overlay-content"> <slot @slotchange="${0}" name="click-content"></slot> <slot @slotchange="${0}" name="hover-content"></slot> </div> `),this.onTrigger,this.onTrigger,this.onTrigger,this.onTargetSlotChange,this.onClickSlotChange,this.onHoverSlotChange)}async openOverlay(e,t,o){const{Overlay:n}=await import("./4020dbee.js");return await n.open(e,o,t,{offset:this.offset,placement:this.placement,receivesFocus:this.type&&"inline"!==this.type?"auto":void 0})}onTrigger(e){if(!this.disabled)switch(e.type){case"click":return void this.onTriggerClick();case"mouseenter":return void this.onTriggerMouseEnter();case"mouseleave":return void this.onTriggerMouseLeave()}}async onTriggerClick(){if(this.targetContent&&this.clickContent){if("modal"===this.type){this.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')||(this.clickContent.tabIndex=0)}const{targetContent:e,clickContent:t}=this;this.closeClickOverlay=await this.openOverlay(e,t,this.type?this.type:"click")}}async onTriggerMouseEnter(){if(this.targetContent&&this.hoverContent){let e=()=>{};this.hoverOverlayReady=new Promise(t=>{e=t});const{targetContent:t,hoverContent:o}=this;this.closeHoverOverlay=await this.openOverlay(t,o,"hover"),e()}}async onTriggerMouseLeave(){await this.hoverOverlayReady,this.closeHoverOverlay&&(this.closeHoverOverlay(),delete this.closeHoverOverlay)}onClickSlotChange(e){const t=this.extractSlotContentFromEvent(e);this.clickContent=t}onHoverSlotChange(e){const t=this.extractSlotContentFromEvent(e);this.hoverContent=t}onTargetSlotChange(e){const t=this.extractSlotContentFromEvent(e);this.targetContent=t}extractSlotContentFromEvent(e){if(!e.target)return;return e.target.assignedNodes().find(e=>e instanceof HTMLElement)}disconnectedCallback(){this.closeClickOverlay&&(this.closeClickOverlay(),delete this.closeClickOverlay),super.disconnectedCallback()}}return s([i({reflect:!0})],e.prototype,"placement",void 0),s([i()],e.prototype,"type",void 0),s([i({type:Number,reflect:!0})],e.prototype,"offset",void 0),s([i({type:Boolean,reflect:!0})],e.prototype,"disabled",void 0),e})();export{c as O};
//# sourceMappingURL=300093ce.js.map
