<html><head> <link rel="preload" href="../../../62c1781d.js" as="script" crossorigin="anonymous"> </head><body><div class="section examples"> <div class="headerContainer"><h2 id="description" class="spectrum-Heading2">Description <sp-link class="header-anchor" href="components/shared/content/index.html#description" aria-label="§">#</sp-link></h2><sp-rule size="large"></sp-rule></div> <p class="spectrum-Body3">Shared mixins, tools, etc. that support developing Spectrum Web Components.</p> <h3 id="usage" class="spectrum-Heading3">Usage <sp-link class="header-anchor" href="components/shared/content/index.html#usage" aria-label="§">#</sp-link></h3> <p class="spectrum-Body3"><sp-link href="https://www.npmjs.com/package/@spectrum-web-components/shared"><img src="https://img.shields.io/npm/v/@spectrum-web-components/shared?style=for-the-badge" alt="See it on NPM!"></sp-link> <sp-link href="https://bundlephobia.com/result?p=@spectrum-web-components/shared"><img src="https://img.shields.io/bundlephobia/minzip/@spectrum-web-components/shared?style=for-the-badge" alt="How big is this package in your project?"></sp-link></p> <code-example preprocessed="preprocessed"><pre slot="code">npm install @spectrum-web-components/shared
</pre></code-example> <p class="spectrum-Body3">Individual base classes and mixins can be imported as follows:</p> <code-example preprocessed="preprocessed"><pre slot="code">import {
    Focusable,
    FocusVisiblePolyfillMixin,
    getActiveElement,
    LikeAnchor,
    ObserveSlotText
} from '@spectrum-web-components/shared';
</pre></code-example> <h3 id="focusable" class="spectrum-Heading3">Focusable <sp-link class="header-anchor" href="components/shared/content/index.html#focusable" aria-label="§">#</sp-link></h3> <p class="spectrum-Body3">The <code>Focusable</code> subclass of <code>LitElement</code> adds some helpers method and lifecycle coverage in order to support passing focus to a container element inside of a custom element. The Focusable base class handles tabindex setting into shadowed elements automatically and is based heavily on the aybolit delegate-focus-mixin at https://github.com/web-padawan/aybolit/blob/master/packages/core/src/mixins/delegate-focus-mixin.js</p> <code-example class="language-js" preprocessed="preprocessed"><pre class="language-js" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> Focusable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/shared/lib/focusable'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit-element'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">FocusableButton</span> <span class="token keyword">extends</span> <span class="token class-name">Focusable</span> <span class="token punctuation">{</span><br>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">styles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> CSSResultArray <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">super</span><span class="token punctuation">.</span>styles<span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">focusElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement <span class="token punctuation">{</span><br>        <span class="token comment">/* istanbul ignore if */</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#button'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">protected</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> TemplateResult <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>            &lt;button<br>                id="button"<br>            &gt;<br>                Focus for this button is being managed by the focusable base class.<br>            &lt;/button&gt;<br>        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></pre></code-example> <h3 id="focusvisiblepolyfillmixin" class="spectrum-Heading3">FocusVisiblePolyfillMixin <sp-link class="header-anchor" href="components/shared/content/index.html#focusvisiblepolyfillmixin" aria-label="§">#</sp-link></h3> <p class="spectrum-Body3">Use this mixin if you would like to leverage <code>:focus-visible</code> based selectors in your CSS. <sp-link href="https://www.npmjs.com/package/focus-visible">Learn more about the polyfill that powers this.</sp-link></p> <h3 id="getactiveelement" class="spectrum-Heading3">getActiveElement <sp-link class="header-anchor" href="components/shared/content/index.html#getactiveelement" aria-label="§">#</sp-link></h3> <p class="spectrum-Body3">Use this helper to find an <code>activeElement</code> in your component. <sp-link href="https://dev.to/open-wc/mind-the-document-activeelement-2o9a">Learn more about tracking active elements over shadow DOM boundaries.</sp-link></p> <h3 id="likeanchor" class="spectrum-Heading3">LikeAnchor <sp-link class="header-anchor" href="components/shared/content/index.html#likeanchor" aria-label="§">#</sp-link></h3> <p class="spectrum-Body3">Mix <code>download</code>, <code>label</code>, <code>href</code>, and <code>target</code> properties into your element to allow it to act more like an <code>HTMLAnchorElement</code>.</p> <h3 id="observerslottext" class="spectrum-Heading3">ObserverSlotText <sp-link class="header-anchor" href="components/shared/content/index.html#observerslottext" aria-label="§">#</sp-link></h3> <p class="spectrum-Body3">When working with <code>&lt;slot&gt;</code>s and their <code>slotchange</code> event, you will have the opportunity to capture when the nodes and/or elements in your element are added or removed. However, if the <code>textContent</code> of a text node changes, you will not receive the <code>slotchange</code> event because the slot hasn't actually received new nodes and/or elements in the exchange. When working with a lit-html binding <code>&lt;your-element&gt;${text}&lt;/your-element&gt;</code> that means you will not receive a <code>slotchange</code> event when the value of <code>text</code> goes from <code>text = ''</code> to <code>text = 'something'</code> or the other way. In these cases the <code>ObserveSlotText</code> can be leverages to apply a mutation observe onto your element that tracks <code>characterData</code> mutations so that you can resspond as desired.</p> <code-example class="language-js" preprocessed="preprocessed"><pre class="language-js" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> ObserveSlotText <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/shared/lib/oberve-slot-text'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> LitElement<span class="token punctuation">,</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit-element'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">ObserveSlotTextElement</span> <span class="token keyword">extends</span> <span class="token class-name">ObserveSlotText</span><span class="token punctuation">(</span>LitElement<span class="token punctuation">,</span> <span class="token string">'#observing-slot'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">protected</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> TemplateResult <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>            &lt;button<br>                id="button"<br>            &gt;<br>                &lt;slot<br>                    id="observing-slot"<br>                    @slotchange=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>manageObservedSlot<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br>                &gt;&lt;/slot&gt;<br>            &lt;/button&gt;<br>        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">protected</span> <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>slotHasContent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; true when &lt;observing-slot-text-element&gt;Text&lt;/observing-slot-text-element&gt;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'observing-slot-text-element'</span><span class="token punctuation">,</span> ObserveSlotTextElement<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> </div> <script type="module" src="../../../62c1781d.js"></script> </body></html>